<!doctype html>
<html>
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <meta charset="utf-8" />
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport" />
    <meta content="This Continuous Deployment Strategy article describes some of the implementation techniques for performing blue/green deployments." name="description" />
    <meta content="gocd, continuous deployment strategies, blue green servers, continuous integration, continuous delivery, canary releases, blue green deployments" name="keywords" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@goforcd" />
    <meta name="twitter:title" content="Blue/Green Deployments | GoCD Blog" />
    <meta name="twitter:description" content="This Continuous Deployment Strategy article describes some of the implementation techniques for performing blue/green deployments." />
    <meta name="twitter:image" content="https://preview.gocd.org/assets/images/blog/blue-green/blue-green-hero-3f180508.jpg" />
    <link rel="canonical" href="https://preview.gocd.org/2017/07/25/blue-green-deployments.html" />

    <title>Blue/Green Deployments | GoCD Blog</title>
    <link href="../../../assets/images/favicon.ico" rel="shortcut icon" />
    <link href="../../../assets/stylesheets/site-1f8853f9.css" rel="stylesheet" />
    <script src="../../../assets/javascripts/all-ebf21de5.js"></script>
    
    <link rel="alternate" type="application/atom+xml" title="GoCD blog feed" href="../../../feed.xml" />
    <script>
      $(document).ready(function(){
    $('.chocolat-parent').Chocolat();
});
    </script>

  </head>

  <body class="x2017 x2017_07 x2017_07_25 x2017_07_25_blue-green-deployments">
    <header class="top">
  <div class="container">
    <a href="../../../" class="logo" analytics-label="logo"><img src="../../../assets/images/go_logo-5b5ca9e1.svg" title="GoCD Logo" alt="GoCD Logo" /></a>
    <nav class="mainnav">
      <ul class="level0">
        <li class="dropdown">
          <a href="../../../why-gocd/" class="link_whygocd" analytics-label="link_whygocd">Why GoCD?</a>
        </li>
        <li class="dropdown">
          <a href="../../../contribute/" class="toplink_contribute" analytics-label="link_community">Community</a>
          <ul  class="level1">
            <li><a href="../../../contribute/" class="link_contribute" analytics-label="link_community&gt;link_contribute">Contribute</a></li>
            <li><a href="../../../events/" class="link_events" analytics-label="link_community&gt;link_events">Events</a></li>
            <li><a href="../../../plugins/" class="link_plugins" analytics-label="link_community&gt;link_plugins">Plugins</a></li>
          </ul>
        </li>
        <li><a href="../../../blog/" class="link_blog" analytics-label="Blog">Blog</a></li>
        <li class="dropdown">
          <a href="../../../help/" class="toplink_help" analytics-label="link_help">Help</a>
          <ul  class="level1">
            <li><a href="../../../help/" class="getting-started" analytics-label="link_help&gt;link_getting_started">Getting started</a></li>
            <li><a href="https://docs.gocd.org/current/" target="_blank" analytics-label="link_help&gt;link_documentation">Documentation</a></li>
            <li><a href="../../../resources.html" class="link_resources" analytics-label="link_help&gt;link_resources">Resources</a></li>
          </ul>
        </li>
        <li><a href="../../../download/" class="link_download" analytics-label="link_help&gt;link_download">Download</a></li>
        <li><a href="https://www.thoughtworks.com/go" class="link_support" target="_blank" analytics-label="link_support">Get Support</a></li>
      </ul>
    </nav>
    <button class="navbtn menu collapse">
    <span></span>
    </button>
  </div>
</header>
<span id="top"></span>
<a href="http://github.com/gocd" class="github-fork-ribbon" target="_blank" analytics-label="link_header_fork&gt;link_download" title="Fork me on GitHub">Fork me on GitHub</a>

    <div class="container blog-post">


  



  <div class="row">
    <div class="col-md-9">

    <div class="post-banner">
      <figure>
  <img src="../../../assets/images/blog/blue-green/blue-green-hero-3f180508.jpg" alt="Blue/Green Deployments" />
</figure>

    </div>


  <header class="blog-post-header">
    <h1>Part 2 - Continuous Deployment Strategies: Blue/Green Deployments</h1>
    <h4>Ketan Padegaonkar</h4>
    <p class='tags'>
<a href="../../../tags/continuous-deployment-strategies.html" class="tag">        Continuous Deployment Strategies
</a>     </p>
  </header>

      <main id="main" role="main" class="blog-post-main-container">
      
<p>In the <a href="../18/continuous-deployment-strategies.html">previous article</a> on Continuous Deployment Strategies, we explored at a high level some of the popular CD strategies.</p>

<p>This article describes some of the implementation techniques for performing blue/green deployments.</p>

<blockquote>
  <p>Blue/green is a technique for deployments where the existing running deployment is left in place. A new version of the application is installed in parallel with the existing version. When the new version is ready, cut over to the new version by changing the load balancer configuration.</p>
</blockquote>

<p>The basic idea behind this technique is to be able to route users to either the green set of servers, or the blue set of servers.</p>

<p>This can be achieved in multiple ways:</p>

<ul>
  <li>Changing the load balancer/router</li>
  <li>Changing public DNS records</li>
  <li>Load Balancer + Internal DNS records</li>
</ul>

<h2 id="changing-the-load-balancerrouter">Changing the load balancer/router</h2>

<p><img src="../../../assets/images/blog/continuous-deployment-strategies/blue-green-deployments-d73adc69.jpeg" alt="Load Balancer Router" title="Load Balancer Router" /></p>

<p>Using this technique you would change the load balancer or request router to point to either the blue server or the green server.</p>

<h2 id="changing-public-dns-records">Changing public DNS records</h2>

<p>Using this technique involves load-balancing at the DNS level by changing either the CNAME or the A records. When users request a DNS entry for your website, your DNS server could return the IP address for either the blue server or the green server. This particular approach would require that the time to live (TTL) is set to a very small value.</p>

<p><img src="../../../assets/images/blog/blue-green/dns-9ac8588f.jpeg" alt="Changing public DNS records" title="Changing public DNS records" /></p>

<p>This particular approach is not recommended for changing public DNS records because some DNS servers run some browsers don't respect the low TTL values on the DNS entry, they will cache the DNS records for longer than the TTL. This may leave a subset of your users not being able to access your website.</p>

<h2 id="load-balancer--internal-dns-records">Load Balancer + Internal DNS records</h2>

<p>This approach is a combination of the two techniques we've seen so far.</p>

<p><img src="../../../assets/images/blog/blue-green/load-balancer-1a3e2b12.jpeg" alt="Load Balancer + Internal DNS records" title="Load Balancer + Internal DNS records" /></p>

<p>In this technique, instead of changing public DNS records, we'll change internal (private) DNS records. Since the internal network and the DNS server can be managed and configured to respect TTLs, this approach works a lot better than changing public DNS records.</p>

      </main>
    </div>
    <div class="col-md-3">
      <aside class="post-sidebar">
        <section  class="recent-ariticles">
          <section class='post'>
            <div class='subscribe-to-blog blogpost'>
   <h3 class='subscribe-title'> Subscribe to The Pipeline</h3>
   <p style="font-size:12px; font-weight:300">Continuous Delivery news in your inbox</p>
    <div id="subscribe-info">
      Send us a mail to <a href="mailto:support@thoughtworks.com?subject=Sign%20me%20up%20for%20GoCD%20blog%20notifications">support@thoughtworks.com</a> and we will sign you up for a notification on new blog posts.
    </div>
    <script type="text/javascript">
      function initMarketoForm() {
        jQuery("#subscribe-info").html("<form id='mktoForm_5414'></form>");
        MktoForms2.loadForm("//app-e.marketo.com", "199-QDE-291", 5414);
      }
    </script>
    <script async="true" src="//app-e.marketo.com/js/forms2/js/forms2.min.js" onload="initMarketoForm()"></script>
</div>

          </section>
          <h2 class="section-title">Recent Articles</h2>
          <ol>
            <li>
              <span class="post-date">Jul 25</span>
              <span class="post-author">Ketan Padegaonkar</span>
              <a href="blue-green-deployments/">Part 2 - Continuous Deployment Strategies: Blue/Green Deployments</a>
            </li>
            <li>
              <span class="post-date">Jul 20</span>
              <span class="post-author">Ken Mugrage</span>
              <a href="../20/deployment-pipeline-automated-testing/">Part 2 - CD 101: Deployment pipeline and types of automated testing</a>
            </li>
            <li>
              <span class="post-date">Jul 18</span>
              <span class="post-author">Ketan Padegaonkar</span>
              <a href="../18/continuous-deployment-strategies/">Part 1 - Continuous Deployment Strategies</a>
            </li>
            <li>
              <span class="post-date">Jul 13</span>
              <span class="post-author">Ken Mugrage</span>
              <a href="../13/introduction-continuous-delivery-101/">Part 1 - CD 101: An introduction to continuous delivery</a>
            </li>
            <li>
              <span class="post-date">Jul 10</span>
              <span class="post-author">Sheroy Marker (Head of Technology), ThoughtWorks Products</span>
              <a href="../10/gocd-vs-spinnaker/">Continuous Delivery: GoCD vs Spinnaker</a>
            </li>
          </ol>
        </section>
        <section>
          <h2 class="section-title">By Year</h2>
          <ol>
            <li><a href="../../">2017 (22)</a></li>
            <li><a href="../../../2016/">2016 (8)</a></li>
            <li><a href="../../../2015/">2015 (21)</a></li>
            <li><a href="../../../2014/">2014 (26)</a></li>
          </ol>
        </section>

      </aside>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <div id="disqus_thread"></div>
      <script>
        var disqus_config = function () {
          /* Careful: Changing the value of page.url and page.identifier might mean you lose comments. */
          this.page.url = "https://www.go.cd/2017/07/25/blue-green-deployments.html";
          this.page.identifier = this.page.url;
          this.shortname = 'gocdblog';
        };
        (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//gocdblog.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </div>
  </div>
</div>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-571784c91d5449dd"></script>

    <footer>
  <div class="join-community">
    <div class="container">
      <h3>Join our community</h3>
      <ul>
        <li>
          <a href="https://groups.google.com/forum/#!forum/go-cd" target="_blank" analytics-label="google-group">
            <i class="icon fa fa-users fa-4x join-us" aria-hidden="true"></i>
            Join our discussion forum
          </a>
        </li>
        <li>
          <a href="https://gitter.im/gocd/gocd" target="_blank" analytics-label="gitter">
            <i class="icon fa fa-comments fa-4x develop-with-us" aria-hidden="true"></i>
           Chat with us
          </a>
        </li>
        <li>
          <a href="https://github.com/gocd/gocd" target="_blank" analytics-label="github">
            <i class="icon fa fa-github fa-4x watch-us" aria-hidden="true"></i>
            watch us
          </a>
        </li>
        <li>
          <a href="https://twitter.com/goforcd" target="_blank" analytics-label="twitter">
            <i class="icon fa fa-twitter fa-4x follow-us" aria-hidden="true"></i>
            follow us
          </a>
        </li>
        <li>
          <a href="../../../subscribe/"><i class='icon fa fa-envelope fa-4x subscribe' aria-hidden='true'></i>subscribe</a>
        </li>
      </ul>
    </div>
  </div>
  <div class="page-footer">
    <div class="container">
      <div class="foo-content">
        <h5 class="help-us-improve">Make this place better</h5>
        <a href="http://github.com/gocd" class="social-buttons" analytics-label="link_footer_fork"><i class="fa fa-code-fork" aria-hidden="true" target="_blank"></i> fork</a>
        <a href="https://github.com/gocd/www.go.cd/issues"  class="social-buttons" analytics-label="link_footer_github_issues"> <i class="fa fa-github" aria-hidden="true"></i> suggest</a>
        <p>
          GoCD is an open-source project, sponsored by <a target="_blank" href="http://www.thoughtworks.com" analytics-label="link_footer_thoughtworks">ThoughtWorks Inc.</a>
          under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" title="Apache 2.0 License">Apache License, Version 2.0</a>
        </p>
      </div>
    </div>
  </div>
</footer>
<a href="#top" class="back-top"><i class="fa fa-arrow-circle-up"></i></a>

    <div class='imagemodal'>
      <div class='imagemodalcontent'>
      </div>
      <div class='close'>&#10006;
      </div>
    </div>

  </body>
  <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5T5PTB"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>
// <![CDATA[
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5T5PTB');
// ]]>
</script>
<!-- End Google Tag Manager -->

<!-- Marketo -->
<script type="text/javascript">
document.write(unescape("%3Cscript src='//munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>Munchkin.init('199-QDE-291');</script>
<!-- End Marketo -->

<!-- Twitter universal website tag code -->
<script>
!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
// Insert Twitter Pixel ID and Standard Event data below
twq('init','nw15k');
twq('track','PageView');
</script>
<!-- End Twitter universal website tag code -->

</html>
